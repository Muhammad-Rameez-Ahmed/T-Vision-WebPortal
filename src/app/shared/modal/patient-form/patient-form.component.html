<div class="card" [ngClass]="{'card-update': updateValue}">
    <div class="card-header">{{inputValue}} Patient</div>
    <div class="card-body p-4">
        <form [formGroup]="patientForm">
            <div class="mhs">
                <img class="" src="{{image? image:'../../../assets/images/icons8-plus-64.png'}}" alt=""
                    (click)="getFile()">
                <input class="mt-2" type="file" hero nbInput name="file1" id="userimage" accept="image/*"
                    (change)="InputImage($event)" hidden required />

            </div>

            <label class="mhs">Patient Profile Picture</label>
            <div class="row p-1" *ngIf="!updateValue">
                <div class="col-md-12">
                    <mat-form-field class="example-full-width">
                        <mat-label>NHS ID:</mat-label>
                        <input matInput placeholder="123123" formControlName="nhsId" name="NHSID" required>
                        <mat-error
                            *ngIf="patientForm.controls['nhsId'].invalid && patientForm.controls['nhsId'].touched">
                            NHS ID is required
                        </mat-error>
                    </mat-form-field>

                </div>
            </div>
            <div class="row p-1">
                <div class="col-md-6">
                    <mat-form-field class="example-full-width">
                        <mat-label>First Name</mat-label>
                        <input matInput placeholder="John" formControlName="firstName" name="firstname" required>
                        <mat-error
                            *ngIf="patientForm.controls['firstName'].invalid && patientForm.controls['firstName'].touched">
                            First Name is required
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-md-6">
                    <mat-form-field class="example-full-width">
                        <mat-label>Last Name</mat-label>
                        <input matInput placeholder="Doe" formControlName="lastName" name=" lastname" required>
                        <mat-error
                            *ngIf="patientForm.controls['lastName'].invalid && patientForm.controls['lastName'].touched">
                            Last Name is required
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>
            <div class="row p-1">
                <div class="col-md-6">
                    <mat-form-field class="example-full-width">
                        <mat-label>Address</mat-label>
                        <input matInput placeholder="123 street" formControlName="address" name="address" required>
                        <mat-error
                            *ngIf="patientForm.controls['address'].invalid && patientForm.controls['address'].touched">
                            Address is required
                        </mat-error>
                    </mat-form-field>
                </div>

                <div class="col-md-3">
                    <mat-form-field class="example-full-width">
                        <mat-label>Age</mat-label>
                        <input matInput type="number" min="18" placeholder="25" formControlName="age" name="age"
                            required>
                        <mat-error *ngIf="patientForm.controls['age'].invalid && patientForm.controls['age'].touched">
                            Age is required
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-md-3">

                    <mat-form-field class="example-full-width">
                        <mat-label>Gender</mat-label>
                        <mat-select formControlName="gender" appearance="fill" required>
                            <mat-option *ngFor="let item of gender" [value]="item.id">
                                {{item.name}}
                            </mat-option>
                        </mat-select>
                        <mat-error
                            *ngIf="patientForm.controls['gender'].invalid && patientForm.controls['gender'].touched">
                            Gender is required
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>

            <div class="row p-1" *ngIf="!updateValue">
                <div [ngClass]="{'col-md-6': !updateValue, 'col-md-12': updateValue}">
                    <mat-form-field class=" example-full-width">
                        <mat-label>Email</mat-label>
                        <input matInput autocomplete="current-password webauthn"
                            [pattern]="'[^@ \t\r\n]+@[^@ . \t\r\n]+\.[^@. \t\r\n][^@ \t\r\n]+'"
                            placeholder="john@gmail.com" formControlName="email" name="emailnew" required>
                        <mat-error
                            *ngIf="patientForm.controls['email'].hasError('required') && patientForm.controls['email'].touched">
                            Email is required
                        </mat-error>
                        <mat-error
                            *ngIf="patientForm.controls['email'].hasError('pattern') && patientForm.controls['email'].touched">
                            Email is invalid
                        </mat-error>
                    </mat-form-field>
                </div>

                <div class="col-md-6" *ngIf="!updateValue">
                    <mat-form-field class="example-full-width">
                        <mat-label>Password</mat-label>
                        <input matInput type="password" placeholder="something" formControlName="password"
                            name="passwordnwe" required>
                        <mat-error
                            *ngIf="patientForm.controls['password'].hasError('required') && patientForm.controls['password'].touched">
                            Password is required
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>
            <div class="row p-1">

                <div [ngClass]="{'col-md-4': !updateValue, 'col-md-12': updateValue}">
                    <mat-form-field class="example-full-width">
                        <mat-label>Contact</mat-label>
                        <input matInput [pattern]="'([0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9])'"
                            placeholder="0213123123" formControlName="contact" name="contact" required>
                        <mat-error
                            *ngIf="patientForm.controls['contact'].hasError('required') && patientForm.controls['contact'].touched">
                            Contact is required
                        </mat-error>
                        <mat-error
                            *ngIf="patientForm.controls['contact'].hasError('pattern') && patientForm.controls['contact'].touched">
                            Contact is invalid
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-md-8" *ngIf="!updateValue">
                    <mat-form-field class="example-full-width">
                        <mat-label>Related</mat-label>
                        <mat-select formControlName="related" appearance="fill">
                            <mat-option value="">None</mat-option>
                            <mat-option *ngFor="let item of modellist" [value]="item.patientId">
                                {{item.patientUserName + ' ' + item.patientLastName}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <!-- <div class="col-md-4" *ngIf="!updateValue">
                    <mat-form-field class="example-full-width">
                        <mat-label>Status</mat-label>
                        <mat-select [(value)]="model.patientStatus" appearance="fill" required>
                            <mat-option value="ACTIVE">ACTIVE</mat-option>
                            <mat-option value="INACTIVE">INACTIVE</mat-option>
                        </mat-select>

                    </mat-form-field>
                </div> -->
            </div>
            <div class="d-flex flex-reverse justify-content-end">

                <button class="close-btn" (click)="close()" type="close">
                    <span class=" fw-600">Close</span>
                </button>
                <button class="add-btn-submit" type="submit" (click)="updateValue? update() : submit()"
                    [disabled]="loading || patientForm.invalid">

                    <ng-container *ngIf=" loading">
                        <span class="spinner-border spinner-border-sm me-2" role="status " aria-hidden="true"></span>
                    </ng-container>
                    <span class=" fw-600" [innerText]="loading ? 'Submitting' : 'Submit'">Submit</span>
                </button>
            </div>

        </form>
    </div>
</div>